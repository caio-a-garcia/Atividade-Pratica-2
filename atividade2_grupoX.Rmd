---
title: "atividade2_grupoX"
author: "Caio, Isabella e Murilo"
date: "2023-11-13"
output: html_document
---

# Atividade prática 2 - Produtividade Policial - Grupo X

## Introdução

Este Rmarkdown tem o objetivo de responder as perguntas da atitivade 2 de Aprendizado de Maquina II.

## Bibliotecas

Todas as bibliotecas utilizadas neste projeto:

```{r Bibliotecas, echo=True, results='hide'}
# Importando as bibliotecas utilizadas no projeto
library(tidyverse)
library(readxl)
library(stringi)
library(factoextra)
library(ggrepel)
```

## Manipulação dos Dados

Realizando as manipulações previstas no documento disponibilizado no blackboard.

```{r Leitura do Arquivo}
# Lendo arquivo xlsx
dados <- read_xlsx("produtividade_policial.xlsx")

# Visualizando uma parte da tabela
dados %>% 
  sample_n(10)
```

Removendo os caracteres especiais do nome das columas e os deixando em letras minúsuculas conforme documento do blackboard:

```{r Ajustando nome das colunas}
dados <- dados %>% 
  rename_with(~ stri_trans_general(.x, "Latin-ASCII") %>% 
                tolower())
```

## Tarefas

1.  Para este exercício, manipule os dados para considerar apenas os dados totais de cada indicador para cada região. Forneça o código que deixa os dados no seguinte formato.

```{r Realizando Transformações, warning=FALSE}
# Realizando as transformações necessarias
dados_transformados <- dados %>%
  pivot_longer(cols = jan:dez, names_to = "mes", values_to = "indicador") %>%
  group_by(regiao, ocorrencia, mes) %>%
  summarise(total = sum(indicador, na.rm = TRUE)) %>%
  group_by(regiao, ocorrencia) %>%
  summarise(total = sum(total, na.rm = TRUE)) %>%
  pivot_wider(names_from = "ocorrencia", values_from = "total")

# Visualizando os resultados
dados_transformados
```












